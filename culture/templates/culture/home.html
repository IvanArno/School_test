{% extends 'culture/base.html' %}

{% block content %}
    <section class="hero">
        <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –Ω–∞—à –∫—É–ª—å—Ç—É—Ä–Ω—ã–π —Å–∞–π—Ç!</h1>
        <p>–ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —à–∫–æ–ª—å–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö, –∞—Ñ–∏—à–∞—Ö –∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è—Ö</p>
        <a href="{% url 'upload' %}" class="btn" style="background: #4caf50; margin-top: 1rem;">
            üì§ –î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π –º–∞—Ç–µ—Ä–∏–∞–ª
        </a>
    </section>
    
    <section>
        <h2 class="section-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∞—Ñ–∏—à–∏</h2>
        <div class="grid">
            {% for poster in posters %}
            <div class="card">
                {% if poster.image %}
                <img src="{{ poster.image.url }}" alt="{{ poster.title }}">
                {% endif %}
                <div class="card-content">
                    <h3>{{ poster.title }}</h3>
                    <p>{{ poster.description|truncatechars:100 }}</p>
                    <p><strong>–î–∞—Ç–∞:</strong> 
                        {% if poster.date %}
                            {{ poster.date }}
                        {% else %}
                            {{ poster.created_at|date:"d.m.Y" }}
                        {% endif %}
                    </p>
                </div>
            </div>
            {% endfor %}
        </div>
        <a href="{% url 'posters' %}" class="btn">–í—Å–µ –∞—Ñ–∏—à–∏</a>
    </section>
    
    <section>
        <h2 class="section-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è</h2>
        <div class="grid">
            {% for performance in performances %}
            <div class="card">
                <div class="card-content">
                    {% if performance.video_url or performance.video_file or performance.youtube_url %}
                    <div style="position: absolute; top: 1rem; right: 1rem; background: #3498db; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.8rem;">
                        üé¨ –í–∏–¥–µ–æ
                    </div>
                    {% endif %}
                    
                    <h3>{{ performance.title }}</h3>
                    <p>{{ performance.description|truncatechars:100 }}</p>
                    <p><strong>–î–∞—Ç–∞:</strong> 
                        {% if performance.date %}
                            {{ performance.date|date:"d.m.Y H:i" }}
                        {% else %}
                            {{ performance.created_at|date:"d.m.Y H:i" }}
                        {% endif %}
                    </p>
                    <a href="{% url 'performance_detail' performance.pk %}" class="btn" style="margin-top: 0.5rem;">
                        ‚ñ∂ –°–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
        <a href="{% url 'performances' %}" class="btn">–í—Å–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è</a>
    </section>
    
    <section>
        <h2 class="section-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</h2>
        <div class="grid">
            {% for photo in photos %}
            <div class="card">
                {% if photo.image %}
                <img src="{{ photo.image.url }}" alt="{{ photo.title }}">
                {% endif %}
                <div class="card-content">
                    <h4>{{ photo.title }}</h4>
                    {% if photo.category %}
                    <span style="background: #eee; padding: 2px 8px; border-radius: 4px; font-size: 0.9rem;">
                        {{ photo.category.name }}
                    </span>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        <a href="{% url 'photos' %}" class="btn">–í—Å–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</a>
    </section>
    
    <!-- –ù–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª: –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ -->
    {% if user_uploads %}
    <section>
        <h2 class="section-title">üì§ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
        <div class="grid">
            {% for upload in user_uploads %}
            <div class="card">
                {% if upload.image %}
                <img src="{{ upload.image.url }}" alt="{{ upload.title }}">
                {% endif %}
                <div class="card-content">
                    <h4>{{ upload.title }}</h4>
                    <p>{{ upload.description|truncatechars:100 }}</p>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 0.5rem;">
                        <span style="background: #4caf50; color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem;">
                            üë§ {{ upload.get_upload_type_display }}
                        </span>
                        <span style="font-size: 0.8rem; color: #666;">
                            {{ upload.created_at|date:"d.m.Y H:i" }}
                        </span>
                    </div>
                    <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                        <a href="{% url 'edit_upload' upload.id %}" style="background: #2196f3; color: white; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.8rem; text-decoration: none;">
                            ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                        </a>
                        <a href="{% url 'delete_upload' upload.id %}" style="background: #f44336; color: white; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.8rem; text-decoration: none;">
                            üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>
    {% endif %}
{% endblock %}